# 场景设计题

#### 微信朋友圈的设计与实现

https://www.jianshu.com/p/e7aacce9f480

#### 设计一个长链接转短链接的服务

https://www.jianshu.com/p/d1cb7a51e7e5

#### 设计一个即时多人聊天软件

#### 一个服务器上面有一个文件，要把这个文件传给别的服务器，别的服务器数量是成千上万个

内容分发网络CDN的基本原理是广泛采用各种缓存服务器，将这些缓存服务器分布到用户访问相对集中的地区或网络中，在用户访问网站时，利用全局负载技术将用户的访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求

### 如何判断一个IP是不是国内IP？
- 最多的办法就是前端获取到ip之后传入后台，由后台来根据ip对照表筛选判断

### 提取两个海量url数据中的相同值
- 1 将AB两个文件，用相同的哈希函数，分解为1000个独立哈希值相同的小文件，这里哈希函数的设计是个重点。
- 2 哈希值不同的url必然不在序号对应的文件中，因此只要在序号对应的两个文件中进行互相匹配即可。

### 怎么给大量url和ip去重
对每一个给定的URL，都是用一个已经建立好的Hash函数，映射到某个物理地址上。当需要进行检测URL是否重复的时候，只需要将这个URL进行Hash映射

- 给大量qq号（亿为单位）如何排序（我讲了一下数据库的外排序，不知道他是不是要这个答案，但是听我讲了挺多的），问我这个算法的时间复杂度。

- 两个大文件存url，找相同url

- 大数据问题，10亿个数存在文件中，只能在一台机器上进行全排序，topk,小根堆，分成多个小文件，用小跟堆，堆排取小文件Top k。之后再用外排或者继续堆排取所有的Top k。

- 31.十台主机，A主机一个文件，想要同步到其他九台主机，如何实现？让我优化

- 4，1000w个整数排序，范围0到100w，8g内存

- 7，设计题，给每个组分配不同的IP段，怎么设计一种结构使的快速得知IP是哪个组的（开始想直接NAT协议搞一搞每个IP一个组的。。面试官说场景不对是给每部分的IP分组。。想用Trie树，面试官让我再优化一下。。）

- 设计一个类似搜索扣扣好友列表，例如输入a显示前缀为a的所有好友，我说对好友列表用字典排序，然后面试官说如果给搜索字段很长的话性能不好，然后我说了用文件索引，然后查找索引，面试官让说出来具体实现，答得不太好