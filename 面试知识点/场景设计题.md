# 场景设计题

#### 微信朋友圈的设计与实现

https://www.jianshu.com/p/e7aacce9f480

#### 设计一个长链接转短链接的服务

https://www.jianshu.com/p/d1cb7a51e7e5

#### 设计一个即时多人聊天软件

#### 一个服务器上面有一个文件，要把这个文件传给别的服务器，别的服务器数量是成千上万个

内容分发网络CDN的基本原理是广泛采用各种缓存服务器，将这些缓存服务器分布到用户访问相对集中的地区或网络中，在用户访问网站时，利用全局负载技术将用户的访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求

### 如何判断一个IP是不是国内IP？
- 最多的办法就是前端获取到ip之后传入后台，由后台来根据ip对照表筛选判断

### 提取两个海量url数据中的相同值
- 1 将AB两个文件，用相同的哈希函数，分解为1000个独立哈希值相同的小文件，这里哈希函数的设计是个重点。
- 2 哈希值不同的url必然不在序号对应的文件中，因此只要在序号对应的两个文件中进行互相匹配即可。

### 怎么给大量url和ip去重
对每一个给定的URL，都是用一个已经建立好的Hash函数，映射到某个物理地址上。当需要进行检测URL是否重复的时候，只需要将这个URL进行Hash映射

- 给大量qq号（亿为单位）如何排序（我讲了一下数据库的外排序，不知道他是不是要这个答案，但是听我讲了挺多的），问我这个算法的时间复杂度。

- 两个大文件存url，找相同url

- 大数据问题，10亿个数存在文件中，只能在一台机器上进行全排序，topk,小根堆，分成多个小文件，用小跟堆，堆排取小文件Top k。之后再用外排或者继续堆排取所有的Top k。

- 31.十台主机，A主机一个文件，想要同步到其他九台主机，如何实现？让我优化

- 4，1000w个整数排序，范围0到100w，8g内存

- 7，设计题，给每个组分配不同的IP段，怎么设计一种结构使的快速得知IP是哪个组的（开始想直接NAT协议搞一搞每个IP一个组的。。面试官说场景不对是给每部分的IP分组。。想用Trie树，面试官让我再优化一下。。）

- 设计一个类似搜索扣扣好友列表，例如输入a显示前缀为a的所有好友，我说对好友列表用字典排序，然后面试官说如果给搜索字段很长的话性能不好，然后我说了用文件索引，然后查找索引，面试官让说出来具体实现，答得不太好

- 8、假设有两个数组，各有十万数量级的整数，如何求交集？
- 9、一万个数，求前100大的数（我说了堆和快排的分割函数，然后问我为什么快排要快，怎么求，复杂度是多少）

- 16、爬虫怎么防止爬到重复的网站？

- 大数据量的表的设计有啥要注意的？

- 假如你这个表有8000万条数据，单张表还能存的下嘛？对于8000万数据的表应该怎么处理？（我说分区表，建立索引等等）

- 有测试过一张表可以存储多少数据么？（我说我某门课上存了500W，访问速度会比较慢）

- 你500W数据查一次要多久？几十毫秒？几百毫秒？几秒？

- 6 如何实现关键字输入提示，使用字典树，复杂度多少，有没有其他方案，答哈希，如果是中文呢，分词后建立字典树？

- 17 10g文件，只有2g内存，怎么查找文件中指定的字符串出现位置。MapReduce分割文件处理。他说可以用cat | grep 管道处理。
- 2 100w个数，怎么找到前1000个最大的，堆排序，怎么构造，怎么调整，时间复杂度。

- 11 秒杀系统的架构设计
- 1 十亿个数的集合和10w个数的集合，如何求它们的交集。
集合的数字不重复。
我讲了两次循环，两次hash，以及排序或者合并等方式。。都不对。后来面试官说是对小数组做hash，然后遍历大数组即可。我完全想错方向了。
- 2 十亿和数找到前100个最大的，堆排序，怎么实现，怎么调整。

- 9 回到网络，刚才你说到直播场景，知道直播的架构怎么设计么，要点是什么，说了几个不太对，他说要避免广播风暴，答不会。

1.上亿数量的链接，如何找出点击量排名前十的链接？

2.请你说几个海量数据存储常见问题**以及如何解答

3.请顾问有两个文件，如何将这两个文件按行依次交叉存入第三个文件中

4、请你回答一下：统计文本中出现次数前十的单词，文件很大，不能一次性读入内存？

5、请你回答一下QQ怎么实现在线大文件的传输

6、请你回答一下新增一个dota2英雄要怎么设计，应该考虑哪些

7、请你说一下你用过哪些电商app,并**比较他们的好坏

8、有一款还没有进入杭州市场的铅笔，怎么估计他的月销售量

9、请你说一下ping百度途径的主机是如何展示出来的

10、1-100,100个数，取走一个，怎么快速知道我取走了哪个数。

海量数据查找访问最多的ip地址 
一亿条数据，内存不够咋办。

top n问题，一亿条数据，取最大的100个
1、Hadoop
1.请你说一下分布式和集群的概念。

2、Hadoop你也有了解的，那你有了解他的备份机制吧？请问怎么做到数据保持一致？
