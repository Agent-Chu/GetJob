# 3.21腾讯

## 电话一面

- TCPIP
- 线程进程区别
- Goroutines
- channel
- 生产者消费者
- 数据库插入大量数据如何提升性能
- 快排
- 一个数组，每个格子有颜色，其中有一种颜色占n/2 + 1，如何找出
- 进程通讯
- 线程通讯
- go并发
- 加锁
- PV操作

## 二面


- 各种排序算法时间复杂度
- 三次握手和四次挥手过程 握手为什么不是两次
- TCP和UDP的区别
- UDP能不能实现可靠链接
- 流量控制
- 堆和栈的区别
- 索引的实现
- stl有没有用过，vector怎么实现
- 红黑树有什么特性
- 给大量qq号（亿为单位）如何排序（我讲了一下数据库的外排序，不知道他是不是要这个答案，但是听我讲了挺多的），问我这个算法的时间复杂度。
- 数组里搜第k大的数
- 非递归二分查找
- 链表相加
- C++对象内存分布
- Vector底层实现
- Map底层实现，时间复杂度
- IPC
- 深拷贝浅拷贝
- 协程的概念
- 构造函数和拷贝赋值函数的区别
- 树的算法
- 解释Time_wait，time_wait连接过多如何解决
- Select和epoll区别，epoll为什么快，epoll的底层实现
- 项目如果改成分布式怎么做，需要考虑哪些问题(ZooKeeper、etcd)
- 项目改成分布式，如何实现负载均衡，如何解决孤岛问题
- 烧香问题
- 两个大文件存url，找相同url
- hashmap.不用任何库自己实现一个hadhmap你会怎么做？冲突，rehash
- 线程之间的同步，我说可以用加锁实现
- 大数据问题，10亿个数存在文件中，只能在一台机器上进行全排序，topk,小根堆，分成多个小文件，用小跟堆，堆排取小文件Top k。之后再用外排或者继续堆排取所有的Top k。
- 5.服务器构架
- 6.GET与POST区别
- 7.网络通信出故障如何排查，讲讲fiddler,tcpdump
- 9.epoll中ET与LT模式，详细讲，问应用场景，优势，为什么ET只支持非阻塞
- 10.讲讲EPOLLONESHOT
- 11.画一下tcp报头
- 12.tcp拥塞控制
- 13.紧急指针
- 14.四次挥手,TIME_WAIT与CLOSE_WAIT详细讲
- 15.如何解决TIME_WAIT？有没有回收机制
- 16.cpu调优，io调优，内存调优
- 17.讲讲内部碎片，外部碎片，如何解决
- 18.讲讲Linux内存管理
- 21.讲讲ftok函数，底层如何实现的
- 22.讲讲你了解的进程调度
- 23.Linux下线程安全
- 24.讲讲你用过的所有锁，除了互斥锁与读写锁
- 25.讲讲自旋锁，递归锁，乐观锁，悲观锁
- 26.vector与list区别，应用场景
- 27.map与unordered_map区别，应用场景
- 28.讲讲重载，重写，隐藏
- 29.如果返回值不同是否能构成重载
- 30.给我画了个图，写出深度优先遍历跟广度优先遍历
- 31.十台主机，A主机一个文件，想要同步到其他九台主机，如何实现？让我优化
- 32.两个文件a,b，文件内部分别定义两个全局变量，用g 编译的时候如何保证两个全局变量初始化顺序
- 33.strace指令
- 34.操作，strcpy与memcpy是不是原子的。
- 2.谈谈我对服务器的理解
- 3.对reactor与proactor理解
- 4.讲讲项目中服务器构架
- 5.对同步异步的理解
- 6.对stl的理解，stl内存分配的理解，为什么要有空间配置器？
- 7.stl与面向对象有什么联系？
- 8.面向对象有什么优点？为什么要有面向对象？
- 9.进程地址空间分布？为什么要有？如何管理？系统调用？
- 10.数据库索引结构？为什么要用B 树？
- 12.谈谈对数据安全的理解？加密？MD5？

- 深入理解数据库索引采用B树和B+树的原因 https://blog.csdn.net/qq_35571554/article/details/82796278

- Linux下查看程序内存状况
答：top指令可以查看按内存大小排序的查询内存状况，或者查看/proc/pid/status文件，这个文件会记录进程id所代表的进程的内存状态
- 4.C++的重载
同名不同参数的函数，在链接的时候，符号表里会给同名函数取唯一的名字
- 5.C程序的编译过程
预处理：替换掉带#的东西，如#include,#define
编译：C源码翻译成汇编
汇编：汇编翻译成机器代码
链接：符号解析和重定位，将程序每一个全局变量和全局函数的引用和符号表里的一个符号对应起来，重定位确定每一个模板模块的全局变量和函数在可执行文件内存空间的位置
- 6.C程序的内存空间
.text:二进制代码段，以及只读数据
.data：全局变量
.bss:未初始化的全局变量
堆
栈
环境变量，参数
内核
- 7.用户态和内核态
- 说一下TCP的全过程,
三次握手四次挥手
- 什么时候会是TIME_WAIT状态，客户端接受到服务器发来的FIN包，并且向服务器发出ACK的时候，客户端变成TIME_WAIT状态，并且等两个MSL时间(一个数据包平均来回时间)就变成CLOSED状态
- 为什么要等两个MSL？
一般情况下一个MSL时间服务器就应该收到了ACK包，客户端等两个MSL就认为服务器收到了ACK，自己就关闭连接

- 1.如何完全消除time await?当初回答的时候设置属性和reuse都是判错的，要求从最后挥手的阶段开始分析
- 2.http 100 206 是什么。。304是什么？取缓存？好说一下过程，然后讲一下304中xxxxx的header有什么作用。http2.0了解吗？做了什么优化处理
- 3.怎么样设计一个比较好的函数完全读出一个socket的所有数据
- 4.sack和mss这两个东西了解过吗
- 5.gdb用过吗？可以，那来讲下死锁应该怎么调试吧
- 7.查内存泄露用什么工具？自己使用过么
- 8.数据库有啥索引，区别是什么，哪个插入快？为什么？你刚才提到了B+Tree索引，介绍一下B TREE和B+TREE，他们的区别是啥？
- 9.EPOLL的一系列问题
- 1，写SQL
- 2，左连接
- 4，1000w个整数排序，范围0到100w，8g内存
- 5，网络的4层结构？TCP协议属于哪一层？TCP四次挥手的过程？最后等待关闭连接要多长时间？（时间真忘了。。）超时重传是怎么做的？ACK序号是表示已收到的序号吗？（卧槽我说的是的。。没理解他想问的是重传这块。。）
- 7，设计题，给每个组分配不同的IP段，怎么设计一种结构使的快速得知IP是哪个组的（开始想直接NAT协议搞一搞每个IP一个组的。。面试官说场景不对是给每部分的IP分组。。想用Trie树，面试官让我再优化一下。。）
- 8，非递归完成二叉树的先序遍历（差点没写出来。。用的左神教的Morris遍历。。）
- 9，什么情况下会发生死锁，解决策略有哪些？
- 10，golang怎么进行垃圾回收的？什么对象会进老年代？垃圾回收算法有哪些？为什么新生代使用复制算法？
- 12，重载和重写的区别？相同参数不同返回值能重载吗？

- 远程笔试。
- 1、char *s1, const char *s2，删除s1中s2出现过的字符
- 2、删除单项链表中重复的节点 (1 2 2 3 3 9) -> (1 2 3 9)
- 3、求二叉树的深度
- 4、单链表判环
- 5、判断一个数是不是回文数
- 6、求一个数组的最长连续子序列

- 2、了解Linux吗？epoll了解吗？
- 3、数据库了解吗，用过哪些数据库？

- 4、用C++还是C？（C++）cout和printf有什么区别？
- 5、为什么模板类一般都是放在一个h文件中？
- 6、有两个链表，怎么求交点？
- 7、一副扑克牌，怎么实现随机打乱？
- 8、假设有两个数组，各有十万数量级的整数，如何求交集？
- 9、一万个数，求前100大的数（我说了堆和快排的分割函数，然后问我为什么快排要快，怎么求，复杂度是多少）
- 10、数据库了解吗？讲讲MySQL和NoSQL
- 11、MySQL两个常用的引擎知道吗？
- 12、假设有一个排好序的数组，数字都是两个两个出现的，只有一个是单独出现的，求这个数（我说了两种方法，一是i = 0, j =1,然后步长为2，当arr[i] != arr[j]时取出i这个地方的数，面试官说不对，然后我说用二分，取中间那个数跟他两边的数进行比较，又说不让用外存，可是我也没用外存啊...然后就懵逼了）
- 13、讲一讲C++中的static数据
- 15、struct和class的区别？
- 16、爬虫怎么防止爬到重复的网站？
- http2.0的特性

- 网络七层协议
- TCP和UDP各自的优势，知道哪些使用UDP协议的成功案例
- TCP和UDP各用了底层什么协议
- 单个UDP报文最大容量
- TCP粘包怎么处理
- DDOS攻击了解吗
- C++  的内存分配
- STL标准库中的数据结构占用的哪一部分的内存
- map的实现用的什么数据结构，插入的时间负责度是多少
- C++  的类中那些成员会被算入sizeof中
- 为什么要内存对齐
- 为什么会有大端小端，htol这一类函数的作用
- RAII
- new和malloc的区别
- linux 文件查找指令
- top显示出来的系统信息都是什么含义
- 手写一个智能指针类，怎么处理并发的情况，加锁的话怎么提高效率
- linux tcp的建立过程
- 用过vim的那些插件
- linux下抓过指令
- linux下查看IO占用情况
- 讲一下线程池
- 多线程模型和epoll模型原理，各自优点
- gdb用过哪些指令，在其中怎么查看线程的运行情况
- 1.TCP三次握手和握手时client&server的状态，为什么不是两次握手；
- 2.syn flood了解吗? DDOS?
- 3.select&epoll是什么?并发度各有什么限制? epoll为什么快?
- 4.epoll的水平触发和边缘触发?
- 5.进程间通信?哪个最快?为什么?
- 6.XSS原理?
- 7.为什么要用https?http的缺点?
- 8.https建立连接的过程?
- 9.非对称加密算法了解哪些?
- 1.TCP三次握手四次挥手的11个状态；
- 2.C++用过吗?说说函数重载；
- 3.函数重载的原理；
- 4.extern c的作用；
- 5.一致性哈希的性质，算法；
- 6.说说快排，时间复杂度是多少，怎么算的；(tips：设快排复杂度为T(n)，由于一次partition复杂度为O(n)，有   T(n) = 2T(n/2) + O(n))
7.红黑树知道吗?说说；
- 问C++与C的区别
- 说下继承多态实现方式
- C++内存管理结构以及各部分作用
- 字节对齐
- vector 实现
- map底层结构
- 红黑树的定义于性质
- hash表的定义以及解决冲突的方法
- select、epoll，IO多路复用
- tcp 断开连接过程
- tcp首部结构
- 网络字节序，如何判断机器大小端模式，自己实现主机跟网络字节的转换的函数
- 网络七层协议，描述一个http从发送请求到接收消息整个七层过程，用到的协议
- 手写单链表反转，
- 设计类似于LRU算法的一个固定cache内存交换算法，要求get,set,delete,高效，重点是数据结构的选用，后来面试官说最好用hash表
- 设计一个类似搜索扣扣好友列表，例如输入a显示前缀为a的所有好友，我说对好友列表用字典排序，然后面试官说如果给搜索字段很长的话性能不好，然后我说了用文件索引，然后查找索引，面试官让说出来具体实现，答得不太好

- 假设在某一字段a上建立索引，搜索10<a<100时候，索引是怎么***作的？
- 10、B+树和完全平衡二叉树的区别？
- Linux命令你知道哪些？说说他们的作用。
- TCP的close_wait了解吗？

- close_wait占据了太多的接口应该怎么办？

- C++虚函数了解吗，讲一下？虚函数的原理是什么？

- C++虚函数表中虚函数的排列顺序是什么样的？（WTF？？？？这谁顶得住啊）

- 纯虚函数了解吗？讲一下

- 在Linux下编译过代码嘛？

- Linux的内核态和用户态讲一下，为什么要有内核态和用户态

- 进入内核态的指令都有哪些？

- 这些表是你自己设计的嘛？对索引了解吗？表用的啥引擎啊？（为啥用这个引擎啊？）

- 大数据量的表的设计有啥要注意的？

- 假如你这个表有8000万条数据，单张表还能存的下嘛？对于8000万数据的表应该怎么处理？（我说分区表，建立索引等等）

- 有测试过一张表可以存储多少数据么？（我说我某门课上存了500W，访问速度会比较慢）

- 你500W数据查一次要多久？几十毫秒？几百毫秒？几秒？

- 除此之外呢？还有那些措施可以加速访问？（我说使用Redis缓存热点数据）

- 使用Redis的情况下如何高并发的写数据？

- 项目还有哪些亮点可以说说？（我说课程的表中加了一列版本号，抢课时候使用CAS操作来增强并发能力）

- 数组和链表的区别
- 使用java语言如何创建单向链表。
- 反转链表。
- 找出两个字符串中的公共最长子串。
- 找出一个整数数组中出现次数最多的数。
- 判断一个字符串是不是两个有序的字符串交错组成的。
- 怎么判断链表是否有环。
- 说说动态规划。
- 知道哪些排序算法，桶排序知道吗。
- 给定一个数组，如何建立一个最大堆。
- hashmap的实现原理。
- 进程和线程的区别。
- 线程死锁。
- 进程的通信方式。
- TCP三次握手。
- NAT 局域网中的一个ip怎么访问外网。
- HTTP状态码
- 浏览器输入一个网址到服务器请求的过程。
- 有哪些HTTP服务器。
- nginx和Apache服务器的区别。
- C++中引用和指针的区别。
- 什么是内存泄漏。
- wait和notify方法为什么加同步锁。
- 知道哪些字符编码，解决了哪些问题，详细说明UTF8编码。
- 1,反转链表和两个字符串最大公共子串
- 2,osi的七层和什么的四层
- 3,tcp和udp  三次握手
- 4，进程和线程区别
- 5,大数据的基本概念
- 1,打印二叉树每层最右边的节点 层序遍历
- 2,synchronized  这个用在类上，用在方法上和变量上有什么区别
- 3,shell会用吗，awk会用吗
- CDN原理以及如何更新缓存？

- 2：springboot启动流程？

- 3：mysql索引为什么要用B+树？

- 4：二叉树深度优先广度优先进行查找？

- 5：mysql语句性能评测？

- 6：docker如何重写？

- 7：垃圾回收如何处理循环引用问题？

- 1 有序数组排序，二分，复杂度
- 2 常见排序算法，说下快排过程，时间复杂度
- 3 有N个节点的满二叉树的高度。1+logN
- 4 朋友之间的点对点关系用图维护，怎么判断两人是否是朋友，并查集，时间复杂度，过程。没讲清楚
- 1. 初始化元素
- 2. 实现元素与元素间的联合操作
- 3. 实现查找元素所在树的根节点
- 4. 解决一个问题，判定两个元素是否在同一棵树上（两个元素是否相互连接）
- 5 单元点最短路的方法，时间复杂度
- 6 如何实现关键字输入提示，使用字典树，复杂度多少，有没有其他方案，答哈希，如果是中文呢，分词后建立字典树？
- 7 hashmap的实现讲一下吧，讲的很详细了。讲一下红黑树的结构，查询性能等。
- 11 死锁是怎么产生的
- 14 CPU的执行方式
- 15 代码中遇到进程阻塞，进程僵死，内存泄漏等情况怎么排查。通过ps查询状态，分析dump文件等方式排查。
- 16 Linux了解么，查看进程状态ps，查看cpu状态 top。查看占用端口的进程号netstat grep
- 17 10g文件，只有2g内存，怎么查找文件中指定的字符串出现位置。MapReduce分割文件处理。他说可以用cat | grep 管道处理。
- 18 Linux的swap了解么，完全不懂。
- 19 Redis和MySQL最大的区别
- 20 讲一下Tomcat的基本架构和组件，以及请求的整个流程。说了一下connector和container架构和servlet请求过程。
- 21 MySQL的存储引擎，有什么区别。
- 22 范围1到1000的数，原本有1000个，互不重复，现多出来1个重复的数，怎么找到他，统计次数，太慢，求和相减。
- 23 N个糖果，每次只能取1个到6个，不能不取，你先取，请问是否有必胜策略，怎么取。刚开始说不太记得了，面试官提示了几个例子，找出规律不能为7的倍数，每次取到只剩7的倍数个糖果即可。

- 1 快排的时间复杂度，冒泡时间复杂度，快排是否稳定，快排的过程
- 2 100w个数，怎么找到前1000个最大的，堆排序，怎么构造，怎么调整，时间复杂度。
- 3 一个矩阵，从左上角到右下角，每个位置有一个权值。可以上下左右走，到达右下角的路径权值最小怎么走。
先说了一下dfs递归实现。面试官说要优化。
说了一下用迪杰斯特拉的思路，说可以。
- 4 四辆小车，每辆车加满油可以走一公里，问怎么能让一辆小车走最远。说了好几种方案，面试官引导我优化了一下，但是还是不满意，最后他说跳过。
- 5 hashmap的实现，hashtable，concurrenthashmap实现。
- 6 MySQL的索引，B+树性质。
- 7 Linux的cpu 100怎么排查，top jstack，日志，gui工具
- 8 Linux大文件怎么查某一行的内容。
- 9 Redis内存数据库的内存指的是共享内存么
- 10 Redis的持久化方式
- 11 秒杀系统的架构设计
- 1 十亿个数的集合和10w个数的集合，如何求它们的交集。
集合的数字不重复。
我讲了两次循环，两次hash，以及排序或者合并等方式。。都不对。后来面试官说是对小数组做hash，然后遍历大数组即可。我完全想错方向了。
- 2 十亿和数找到前100个最大的，堆排序，怎么实现，怎么调整。
- 3 TCP和UDP的区别，具体使用场景呢。
- 4 TCP四次挥手讲一下过程，最后一次ack如果客户端没收到怎么办。
- 5 对于socket编程，accept方法是干什么的，在三次握手中属于第几次，可以猜一下，为什么这么觉得。
- 6 Linux操作系统了解么，了解一点点，就没问了。
- 7 对于单例模式，有什么使用场景了，讲了全局id生成器，他问我分布式id生成器怎么实现，说了zk，问我zk了解原理不，讲了zab，然后就没问啦。
- 8 除了单例模式，知道适配器模式怎么实现么，有什么用
- 9 回到网络，刚才你说到直播场景，知道直播的架构怎么设计么，要点是什么，说了几个不太对，他说要避免广播风暴，答不会。
- 10 Redis和MySQL有什么区别，用于什么场景。
- 3 Linux了解哪些，基础命令和知识。问我proc文件系统了解么，答不了解。
- 4 TCP和UDP的核心区别在哪，讲了滑动窗口保证可靠有序传输，UDP不可靠。TCP需要连接而UDP不需要。
- 5 TCP的四次挥手，time wait状态有什么意义。
- 多线程通信和同步机制：加锁、信号量、条件变量

- 多进程与多线程的区别

- 共享内存、与malloc的区别

- HTTP和HTTP2的了解

- TCP与UDP的区别

查找的常用数据结构：二叉树、跳表、hash

类中一般包括哪些默认生成的函数：构造、析构、复制构造、赋值操作符、取地址操作符等

常用的STL数据结构、Vector、Map的底层实现

Top k问题

常用的调试方法和工具

现有开源分布式存储的系统或协议是否了解？

分布式存储系统相关问题：数据同步、单点故障、副本容灾、读写一致性等

本科期间参与的竞赛作品

二面 3月9日 1小时20分钟
多进程通信、同步方式

进程的地址空间

共享内存使用

操作系统内存管理、虚拟分页内存管理

TCP四次挥手

IO多路复用、select和epoll的区别

epoll的LT和ET

网络编程服务器端的接口调用顺序

多态

构造函数是否可抛异常？

构造函数中有哪些注意事项？不能为虚函数？

析构函数为什么要是虚函数？

STL容器的数据实际存在什么位置？

查找的常用数据结构？

hash冲突的几种解决办法

程序编译过程、静态链接和动态链接等

闪存介质的写放大问题如何优化？

5升和6升杯子，如何获得3升水？

项目中的优缺点？以及如何改进？

算法题目一道：栈思想，处理字符串

三面 3月12日 35分钟
进程与线程的区别

是否有了解其他开源分布式存储框架和协议？

项目存在的缺点？如何优化？

单点故障问题如何解决？

多数据节点多线程写的一致性保证？

多机备份

其他类似关于分布式存储的问题

未来两到三年的规划

团队交流合作

日常如何学习新的知识

个人性格问题

作者：兔砸
链接：https://www.nowcoder.com/discuss/162246
来源：牛客网

tcp面向字节流的体现
udp面向报文的体现
tcp三次握手
服务器关闭端口会怎么样
网络出现问题会怎么样
客户端能不能区别两者

cpp分配内存有哪几种方式
引用和指针的区别

多线程？进程间通信？
数据库？

手写代码
回形矩阵



二面
两道题
  10亿数据求前n大
  最大连续数字串

c 有哪些比c好的地方
引用是什么 数组能不能用引用
内存分配方式有哪些
怎么实现在main函数之外打印代码，不通过main函数调用
联合和结构体有什么区别
类里面有成员函数纯虚函数虚函数还有变量 内存里面是怎么样的(编译原理

作者：特立独行MVP
链接：https://www.nowcoder.com/discuss/161537
来源：牛客网

说一说你实现的reactor模式的服务器 的架构
reactor模式是什么
read系统调用会有哪些错误，你处理过哪些？
你实现的服务器处理过哪些中断信号？说一说
对一个关闭的socket发起写的请求会发生什么中断？
守护进程是什么？
要你实现一个守护进程，你会怎么实现？有没有看过守护进程的实现源码？
在一个进程执行某个函数的时候 成为一个守护进程，知道细节是什么？
gevent是什么？
gevent的好处是什么？
说一说gevent的实现细节
协程的切换在什么时候？
如果在发送一个数据的时候，调用这个函数，你觉得什么时候会切换？
如何实现协程的自动切换？说出你的想法。使用epoll
在写数据的时候返回怎样的错误的时候，你可以去切换？
c 的运行时多态怎么实现的？
析构函数可以抛异常么？说出原因
golang 的协程 说一下你的理解
golang当中的协程是占用一个cpu还是会被调度到不同的cpu？
TCP的流量控制的方式
接收方的读缓冲区为0，当读缓冲区读完的时候，发送方如何知道该发送了？
说说熔断机制
说说timewait，为什么有这个等待
快排的最坏复杂度是多少
如何优化快排
算法：

o(n)时间，1个变量实现洗牌

不用变量交换两个整型有什么方式，实现一下。

写一个优化版本的快排

二面：电话面
时间是今天下午3点

实习时间
介绍一下之前做的CRM项目
这个架构的瓶颈点在哪里？
为什么apigateway层不做无状态的，可以平行扩容
redis用的是单机版还是集群？
redis的数据备份和恢复有哪些？
两种备份方式的优缺点是什么？
说一下关于k8s的项目
说一下websocket和http协议的区别以及优化
websocket是怎么实现服务器往客户端推消息的？
HTTP协议为什么不支持？
长连接为什么不行？
有什么问题想问？
这边主要是做智能客服的大后台。基于QQ资源。做微服务。
然后就说是后面是总监面和hr面，让我保持电话畅通。。。。



13. mysql引擎用的是什么？优缺点说一下
14. 为什么查询比较快？
15. 是不是关系型数据库都可以建立索引？为什么？
16. c++这一块比较熟悉吧？ 有没有什么类是不能被继承的？
17. tcp三次握手说一下
18. 第一次发的序列号怎么产生的？
19. 序列号为什么是随机的？能不能固定从1开始？为什么？
20. 两次握手可不可以？有什么后果？
